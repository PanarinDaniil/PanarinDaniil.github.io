<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>Small AJAX</title>
  <link rel="shortcut icon" href="favicon.ico">
  <style type="text/css">
    body{
      margin:0;
      padding:0;
    }
    #list{
      padding:0;
      margin:0;
    }
    #list li{
      display:block;
    }
    #list > li{
      margin-bottom:15px;
      padding:5px 0;
    }
    #list > li:nth-child(even){
      background:#eee;
    }
    .inner-list{
      list-style:disc;
    }
    .inner-list img{
      display:block;
      max-width:200px;
    }

  </style>
</head>
<body>
  <button id="button">Загрузить phones.json!</button>
  <ul id="list"></ul>

  <script>
    var button = document.getElementById('button');
    button.addEventListener("click", function(){
      var xhr = new XMLHttpRequest();
      xhr.open('GET', 'phones.json');
      xhr.send();
      xhr.onreadystatechange = function() {
        if (xhr.readyState != 4) return;
        button.parentNode.removeChild(button);
        if (xhr.status != 200) {
          console.log('Ошибка ' + xhr.status + ': ' + xhr.statusText);
        } else {
          try {
            var phones = JSON.parse(xhr.responseText);
          } catch (e) {
            console.log( "Некорректный ответ " + e.message );
          }
          showPhones(phones);
        }
      }
      button.innerHTML = 'Загружаю...';
      button.disabled = true;
    });

    function showPhones(phones) {
      var list = document.getElementById('list');
      for (var i = 0; i < phones.length; i++) {
        var li = list.appendChild(document.createElement('li'));
        var ul = li.appendChild(document.createElement('ul'));
        ul.classList.add("inner-list");
        var obj = phones[i];
        for (var prop in obj) {
          var liInner = ul.appendChild(document.createElement('li'));
          if ( prop.indexOf("imageUrl") !== -1 ) {
            liInner.innerHTML = "<img src='" + obj[prop] + "' alt='" + obj.name + "' />";
          } else {
            liInner.innerHTML = obj[prop];
          }
        }
      }
    }
  </script>
</body>
</html>