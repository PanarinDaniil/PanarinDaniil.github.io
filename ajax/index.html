<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
</head>
<body>
  <button onclick="loadPhones()" id="button">Загрузить phones.json!</button>
  <ul id="list"></ul>

  <script>
    function loadPhones() {
      var button = document.getElementById('button');
      var xhr = new XMLHttpRequest();

      xhr.open('GET', 'phones.json');
      xhr.send();
      xhr.onreadystatechange = function() {
        if (xhr.readyState != 4) return;

        button.parentNode.removeChild(button);
        // button.innerHTML = 'Готово!';
        if (xhr.status != 200) {
          // обработать ошибку
          console.log('Ошибка ' + xhr.status + ': ' + xhr.statusText);
        } else {
          // вывести результат
          try {
            var phones = JSON.parse(xhr.responseText);
          } catch (e) {
            console.log( "Некорректный ответ " + e.message );
          }
          showPhones(phones);
        }
      }
      button.innerHTML = 'Загружаю...';
      button.disabled = true;
    }

    function showPhones(phones) {
      var list = document.getElementById('list');
      phones.forEach( function(phone) {
        var li = list.appendChild(document.createElement('li'));
        li.innerHTML =  "<ul class='inner-list'><li>" + phone.age + "</li><li>" + phone.carrier + "</li><li>" + phone.id + "</li><li><img src='" + phone.imageUrl + "' alt='" + phone.name + "'</li><li>" + phone.name + "</li><li>" + phone.snippet + "</li></ul>";
        // var ul = li.appendChild(document.createElement('ul'));
        // var liAge = ul.appendChild(document.createElement('li'));
        // var liCarrier = ul.appendChild(document.createElement('li'));
        // var liId = ul.appendChild(document.createElement('li'));
        // var liImageUrl = ul.appendChild(document.createElement('li'));
        // var liName = ul.appendChild(document.createElement('li'));
        // var liSnippet = ul.appendChild(document.createElement('li'));
        // liAge.innerHTML = phone.age;
        // liCarrier.innerHTML = phone.carrier;
        // liId.innerHTML = phone.id;
        // liImageUrl.innerHTML = phone.imageUrl;
        // liName.innerHTML = phone.name;
        // liSnippet.innerHTML = phone.snippet;
      });
    }
  </script>
</body>
</html>